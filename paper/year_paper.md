多核
=========

摘要
=========


Abstract
=========



引言
=========
当前基于AMD64/X86\_64架构的多核系统已经得到广泛应用。但随着40核甚至
80核的NUMA系统的出现，对已有操作系统的多核可扩展性能提出了苛刻的要求。
近年越来越多的研究发现【1,3】，由于现有操作系统在设计上的问题，OS在最新的多核系统中成为瓶颈的情况大大增多。

在造成Linux等现有OS在40到80核多核系统上可扩展性问题的各种因素中，一个核心原是CPU核间数据共享及其竞争。这种竞争体现在多个方面：
* 通过原子操作指令（x86中的Lock前缀）修改内核对象的引用计数
（reference count）Cache Miss/Snoop protocol
* 通过锁操作控制共享数据访问
* etc

收到编译器优化技术的启发，有研究者提出了一种在系统接口（如Posix规范）中发现可扩展潜能的方法[2]。他们称之为”可交换性法则“：只要两个操作的顺序可以交换，那么就可以用多核可扩展的方式实现这些操作。其中的原理是，如果两个操作可以交换（不影响操作结果，因此调用者无法分辨它们执行的顺序），那么他们就可以用不造成读-写冲突的方式实现。

基于这条规律，我们提出了基于模型验证（model
checking）和符号执行的方法，求解Posix标准中系统调用的可交换条件。对于操作系统中对堆（heap）变量和指针操作建模和推理的难点，提出了使用separation
logic 和类似KLEE[5]的解决方法。


操作系统系统调用和中断建模
===========
今年来，随着SMT求解器，如STP、MathSAT、Z3的进步，越来越多的


系统调用
-----------

中断
-----------


基于模型的可交换性求解
===========

基本算法
-----------


操作系统模型中求解难点及解决思路
-----------


### Separation logic

### KLEE

### 例子


总结
============



Reference

1. RadixVM
2. Commuter
3. An Analysis of Linux Scalability to Many Cores
4. Non-scalable locks are dangerous
5. KLEE
6. Using Model Checking to Find Serious File System Errors
